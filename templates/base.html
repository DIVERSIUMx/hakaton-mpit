<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
		crossorigin="anonymous"></script>
	<link href="/static/css/base.css" rel="stylesheet">
	<title>{{ title }}</title>

</head>

<body>
	<header class="site-header py-2">
		<div class="container d-flex align-items-center justify-content-between">
			<div class="d-flex align-items-center gap-3">
				<div class="logo-wrap">
					<img src="/static/img/vsu_logo.png" alt="VGU logo">
					<div>
						<div class="brand-text">–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∏–π –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</div>
						<div class="brand-sub">–û–Ω–ª–∞–π–Ω –°–µ—Ä–≤–∏—Å ‚Äî –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç</div>
					</div>
				</div>
			</div>

			<nav class="d-none d-md-flex align-items-center">
				<a class="nav-link" href="/">–ì–ª–∞–≤–Ω–∞—è</a>
				<a class="nav-link" href="/cources">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</a>
				<a class="nav-link" href="/merch">–ë—Ä–µ–Ω–¥</a>
				{% if current_user.is_authenticated %}
				<a class="btn btn-outline-light btn-sm ms-3" href="/logout">–í—ã–π—Ç–∏</a>
				{% else %}
				<a class="btn btn-outline-light btn-sm ms-3" href="/login">–í–æ–π—Ç–∏</a>
				{% endif %}

        <button class="theme-toggle btn btn-outline-light btn-sm ms-3" id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
          <span class="theme-icon">üåô</span>
        </button>
			</nav>

			<div class="d-md-none">
				<button class="btn btn-sm btn-outline-light" data-bs-toggle="offcanvas"
					data-bs-target="#mobileMenu">–ú–µ–Ω—é</button>
			</div>
		</div>
	</header>

	<div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="mobileMenu">
		<div class="offcanvas-header">
			<h5 class="offcanvas-title">–ú–µ–Ω—é</h5>
			<button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
		</div>
		<div class="offcanvas-body">
			<ul class="list-unstyled">
				<li><a class="d-block py-2 text-decoration-none text-white" href="/"
						data-bs-dismiss="offcanvas">–ì–ª–∞–≤–Ω–∞—è</a>
				</li>
				<li><a class="d-block py-2 text-decoration-none text-white" href="/coucers"
						data-bs-dismiss="offcanvas">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</a></li>
				<li><a class="d-block py-2 text-decoration-none text-white" href="/merch"
						data-bs-dismiss="offcanvas">–ë—Ä–µ–Ω–¥</a></li>
				<li><a class="d-block py-2 text-decoration-none text-white" href="/"
						data-bs-dismiss="offcanvas">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
				<li class="pt-3"><button class="btn btn-light w-100">–í–æ–π—Ç–∏</button></li>
			</ul>
		</div>
	</div>
	<main>
		{% block content %}
		{% endblock %}
	</main>
  <script>
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function initTheme() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      const html = document.documentElement;

      html.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);
      applyThemeToPage(savedTheme);
    }

    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
      applyThemeToPage(newTheme);
    }

    function updateThemeIcon(theme) {
      const icons = document.querySelectorAll('.theme-icon');
      icons.forEach(icon => {
        icon.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      });
    }

    function applyThemeToPage(theme) {
      if (theme === 'light') {
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É
        document.body.style.background = '#f1f5f9';
        document.body.style.color = '#001032';

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏
        document.querySelectorAll('.glass-card').forEach(card => {
          card.style.background = 'linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9))';
          card.style.border = '1px solid #cbd5e1';
          card.style.color = '#001032';
          card.style.boxShadow = '0 8px 30px rgba(0, 16, 50, 0.1)';
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ—Ä–º—É
        document.querySelectorAll('.form-control').forEach(input => {
          input.style.background = 'rgba(255, 255, 255, 0.95)';
          input.style.border = '1px solid #cbd5e1';
          input.style.color = '#001032';
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º muted —Ç–µ–∫—Å—Ç
        document.querySelectorAll('.muted').forEach(el => {
          el.style.color = '#588cc8';
        });

      } else {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É
        document.body.style.background = '#0f1724';
        document.body.style.color = '#eef2ff';

        document.querySelectorAll('.glass-card').forEach(card => {
          card.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
          card.style.border = '1px solid rgba(255,255,255,0.06)';
          card.style.color = '#eef2ff';
          card.style.boxShadow = '0 8px 30px rgba(0,0,0,0.6)';
        });

        document.querySelectorAll('.form-control').forEach(input => {
          input.style.background = 'rgba(255,255,255,0.05)';
          input.style.border = '1px solid rgba(255,255,255,0.1)';
          input.style.color = 'white';
        });

        document.querySelectorAll('.muted').forEach(el => {
          el.style.color = 'rgba(255,255,255,0.75)';
        });
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
    document.addEventListener('DOMContentLoaded', initTheme);
    document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
  </script>
</body>

</html>
